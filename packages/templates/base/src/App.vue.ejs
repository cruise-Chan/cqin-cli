<template>
  <div class="app">
    <h1>{{ msg }}</h1>
    <p>Generated by cqin-cli</p>
  </div>
</template>

<script <% if (language === 'TypeScript') { %>lang="ts"<% } %>>
import request  from '@/common/request'
<% if (language === 'TypeScript') { %>
export default {
  name: 'App',
  data(): { msg: string } {
    return {
      msg: '<%= msg %>'
    }
  }
}
<% } else { %>
export default {
  data() {
    return {
      msg: '<%= msg %>'
    }
  }
}
<% } %>
request.use('request', {
  onFulfilled: (config) => {
    const token = localStorage.getItem('token')
    if (token) {
      config.headers.Authorization = `Bearer ${token}`
    }
    return config
  }
})
// 添加响应拦截器（处理数据格式）
request.use('response', {
  onFulfilled: async (response) => {
    const data = await response.json()
    if (data.code !== 200) {
      throw new Error(data.message)
    }
    return data
  }
})
</script>

<style <% if (cssPreprocessor !== 'CSS') { %>lang="<%= styleLang %>"<% } %>>
.app {
  color: #42b983;
}
.greeting {
  <% if (cssPreprocessor === 'Sass/SCSS') { %>
  &-text {
    color: blue;
  }
  <% } else { %>
  color: red;
  <% } %>
}
</style>