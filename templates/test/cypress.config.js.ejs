import { defineConfig } from 'cypress';

export default defineConfig({
  e2e: {
    baseUrl: 'http://localhost:5173',
    defaultCommandTimeout: 10000, // 超时时间设为10秒
    experimentalMemoryManagement: true, // 启用内存管理
    numTestsKeptInMemory: 10, // 减少内存占用
    setupNodeEvents(on, config) {
      // 添加查询命令兼容性处理
      on('dev-server:start', (options) => {
        return require('@cypress/webpack-dev-server')(options)
      })
      return config;
    },
    env: {
      apiPrefix: '/api/v1' // 与脚手架生成配置一致
    },
  },
});